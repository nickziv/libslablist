#!/usr/bin/ksh

# This script assumes that build_lib and install_lib have been run already.

cmplr=gcc
c_flags="-m64"
c_inc="-I /opt/libslablist/include"
ld_flags="-R /opt/libslablist/lib/64:/opt/libslablist/lib"
#ld_flags=""
libs="-lc -lumem -L /opt/libslablist/lib/64 -lslablist"
#libs="-lc -lumem -lslablist"
src_dir="../src"

csrc_file[2]=../drv/drv_ranged_ops.c
csrc_file[3]=../drv/drv_rand_ops.c

cobj_file[2]=drv_ranged_ops.o
cobj_file[3]=drv_rand_ops.o

cout_file[2]=drv_ranged_ops
cout_file[3]=drv_rand_ops

#Here we compile all the files
print "Compiling All Files"
for i in 2 3
do
	$cmplr -c $c_inc $c_flags ${csrc_file[$i]} #$libs
done

# Probably useless
#Here we concat all the obj-file names for the cli...
obj_line=""
for i in 2 3
do
	obj_line=$obj_line${cobj_file[$i]}" "
done


print "Generating Executable"
for i in 2 3
do
	$cmplr $c_flags -o ${cout_file[$i]} ${cobj_file[$i]} $ld_flags $libs 
done
